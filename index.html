<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet/less" href="styles/html.css">
    <script type="text/javascript" src="scripts/sqlite.js"></script>
    <script type="text/javascript" src="scripts/html.js"></script> 
    <script type="text/javascript">
        window.onerror = function (msg, url, num) {
            alert("Error: " + msg + "\nURL: " + url + "\nLine: " + num);
            return true;
        };

        function onload() {
            sqlite = new SQLite("data/sqlite.db");

            entities = [];
            relations = [];
            entity_types = ["project", "technology"]; // TODO: auto generate via sqlite query

            table_div = new Div(
                "table",
                [
                    new EntitiesSearch((entity) => entity["type"] == "project", "filter projects..")
                ]
            );

            cm = new ContextManager([
                table_div
            ]);

            // fetch entities
            query_str = "SELECT * FROM entities";
            sqlite.query(query_str, (result) => cm.updateEntities(result));
        }
    </script>
</head>

<body onload="onload()">
    <div id="table"></div>
</body>

</html>